services:
    _defaults:
        autowire: true
        autoconfigure: true

    OpenDxp\Bundle\AdminBundle\Installer:
        public: true
        arguments:
            $bundle: "@=service('kernel').getBundle('OpenDxpAdminBundle')"

    #
    # CONTROLLERS
    #

    # auto-register all controllers as services
    OpenDxp\Bundle\AdminBundle\Controller\:
        resource: '../src/Controller'
        public: true
        tags: ['controller.service_arguments']

    OpenDxp\Bundle\AdminBundle\Controller\Admin\IndexController:
        public: true
        arguments:
            $httpClient: '@opendxp.http_client'
        tags: [ 'controller.service_arguments' ]

    #
    # COMMANDS
    #

    # auto-register all commands as services
    OpenDxp\Bundle\AdminBundle\Command\:
        resource: '../src/Command'
        tags: [ 'console.command' ]

    #
    # TRANSLATIONS
    #

    OpenDxp\Bundle\AdminBundle\Translation\AdminUserTranslator: ~

    #
    # GDPR Services
    #

    # Tagged data providers will be injected from compiler pass
    OpenDxp\Bundle\AdminBundle\GDPR\DataProvider\Manager: ~

    # Providers implementing DataProviderInterface will be auto-tagged via autoconfiguration
    OpenDxp\Bundle\AdminBundle\GDPR\DataProvider\DataObjects:
        arguments:
            $config: '%opendxp.gdpr-data-extrator.dataobjects%'

    OpenDxp\Bundle\AdminBundle\GDPR\DataProvider\Assets:
        arguments:
            $config: '%opendxp.gdpr-data-extrator.assets%'

    OpenDxp\Bundle\AdminBundle\GDPR\DataProvider\SentMail: ~
    OpenDxp\Bundle\AdminBundle\GDPR\DataProvider\OpenDxpUsers:
        arguments:
            $logsDir: '%kernel.logs_dir%'


    #
    # Grid Helper Service
    #

    OpenDxp\Bundle\AdminBundle\Helper\GridHelperService: ~

    #
    # User Helper Service
    #

    OpenDxp\Bundle\AdminBundle\Helper\User: ~

    #
    # Default Preview Generator
    #

    OpenDxp\Model\DataObject\ClassDefinition\PreviewGeneratorInterface:
        class: OpenDxp\Bundle\AdminBundle\Service\PreviewGenerator

    #
    # Twig Extensions
    #

    OpenDxp\Twig\Extension\AdminExtension: ~
    
    OpenDxp\Bundle\AdminBundle\Twig\Extension\AdminExtension: ~

    #
    # Workflows
    #
    
    OpenDxp\Bundle\AdminBundle\Service\Workflow\ActionsButtonService: ~

    #
    # Admin Config Services
    #
    OpenDxp\Bundle\AdminBundle\System\AdminConfig: ~

    #
    # Element Services
    #
    OpenDxp\Bundle\AdminBundle\Service\ElementServiceInterface:
        class: OpenDxp\Bundle\AdminBundle\Service\ElementService
